{
    "sourceFile": "src/pages/dashboard/accidents.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1748384282141,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748384294473,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n import React from 'react'\r\n \r\n function Accidents() {\r\n   return (\r\n-    <div>A</div>\r\n+    <div>Accidents</div>\r\n   )\r\n }\r\n \r\n export default Accidents\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748384388446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n import React from 'react'\r\n \r\n-function Accidents() {\r\n+export function Accidents() {\r\n   return (\r\n     <div>Accidents</div>\r\n   )\r\n }\r\n"
                },
                {
                    "date": 1748385144559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,114 @@\n-import React from 'react'\r\n+import {\r\n+    Card,\r\n+    CardHeader,\r\n+    CardBody,\r\n+    Typography,\r\n+} from \"@material-tailwind/react\";\r\n+import { EyeIcon } from \"@heroicons/react/24/outline\";\r\n+import { useEffect, useState } from \"react\";\r\n\\ No newline at end of file\n+import client from \"../../api/client\";\r\n \r\n export function Accidents() {\r\n-  return (\r\n-    <div>Accidents</div>\r\n-  )\r\n+    const [accidents, setAccidents] = useState([]);\r\n+    const [search, setSearch] = useState(\"\");\r\n+    const [currentPage, setCurrentPage] = useState(1);\r\n+    const accidentsPerPage = 5;\r\n+\r\n+    useEffect(() => {\r\n+        const fetchAccidents = async () => {\r\n+            const res = await client.get(\"/accident/accident\");\r\n+            setAccidents(res.data?.result || []);\r\n+        };\r\n+        fetchAccidents();\r\n+    }, []);\r\n+\r\n+    const filteredAccidents = accidents?.filter((acc) =>\r\n+        acc.accidentId?.toLowerCase().includes(search.toLowerCase())\r\n+    );\r\n+\r\n+    const indexOfLast = currentPage * accidentsPerPage;\r\n+    const indexOfFirst = indexOfLast - accidentsPerPage;\r\n+    const currentAccidents = filteredAccidents.slice(indexOfFirst, indexOfLast);\r\n+    const totalPages = Math.ceil(filteredAccidents.length / accidentsPerPage);\r\n+\r\n+    return (\r\n+        <div className=\"mt-12 mb-8 flex flex-col gap-12\">\r\n+            <Card>\r\n+                <CardHeader\r\n+                    variant=\"gradient\"\r\n+                    color=\"gray\"\r\n+                    className=\"mb-8 p-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4\"\r\n+                >\r\n+                    <Typography variant=\"h6\" color=\"white\">\r\n+                        Liste des accidents\r\n+                    </Typography>\r\n+                    <input\r\n+                        type=\"text\"\r\n+                        placeholder=\"Rechercher par ID d'accident...\"\r\n+                        className=\"px-3 py-2 rounded-md text-sm text-gray-800\"\r\n+                        onChange={(e) => {\r\n+                            setSearch(e.target.value);\r\n+                            setCurrentPage(1);\r\n+                        }}\r\n+                    />\r\n+                </CardHeader>\r\n+\r\n+                <CardBody className=\"overflow-x-scroll px-0 pt-0 pb-2\">\r\n+                    <table className=\"w-full min-w-[640px] table-auto border border-gray-200\">\r\n+                        <thead>\r\n+                            <tr className=\"bg-gray-100\">\r\n+                                {[\"ID Accident\", \"Total Véhicules\", \"Véhicules Soumis\", \"Statut\", \"Date de Création\", \"Date de Mise à Jour\", \"Actions\"].map((header) => (\r\n+                                    <th key={header} className=\"px-4 py-2 text-xs font-bold text-center uppercase text-blue-gray-500 border-b\">\r\n+                                        {header}\r\n+                                    </th>\r\n+                                ))}\r\n+                            </tr>\r\n+                        </thead>\r\n+                        <tbody>\r\n+                            {currentAccidents.map((accident, index) => (\r\n+                                <tr key={index} className=\"text-center text-sm\">\r\n+                                    <td className=\"px-4 py-2 border-b\">{accident.accidentId}</td>\r\n+                                    <td className=\"px-4 py-2 border-b\">{accident.totalVehicles}</td>\r\n+                                    <td className=\"px-4 py-2 border-b\">{accident.submittedVehicles}</td>\r\n+                                    <td className=\"px-4 py-2 border-b\">{accident.isComplete ? \"Complet\" : \"Incomplet\"}</td>\r\n+                                    <td className=\"px-4 py-2 border-b\">{new Date(accident.createdAt).toLocaleDateString()}</td>\r\n+                                    <td className=\"px-4 py-2 border-b\">{new Date(accident.updatedAt).toLocaleDateString()}</td>\r\n+                                    <td className=\"px-4 py-2 border-b\">\r\n+                                        <button\r\n+                                            className=\"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium px-3 py-1.5 rounded-lg shadow-sm transition\"\r\n+                                        >\r\n+                                            <EyeIcon className=\"h-5 w-5\" />\r\n+                                        </button>\r\n+                                    </td>\r\n+                                </tr>\r\n+                            ))}\r\n+                        </tbody>\r\n+                    </table>\r\n+\r\n+                    {/* Pagination */}\r\n+                    <div className=\"flex justify-center items-center mt-6 gap-2\">\r\n+                        <button\r\n+                            onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}\r\n+                            disabled={currentPage === 1}\r\n+                            className=\"px-3 py-1 text-sm bg-gray-200 rounded disabled:opacity-50\"\r\n+                        >\r\n+                            Précédent\r\n+                        </button>\r\n+                        <span className=\"text-sm font-medium\">\r\n+                            Page {currentPage} / {totalPages}\r\n+                        </span>\r\n+                        <button\r\n+                            onClick={() => setCurrentPage((prev) => Math.min(prev + 1, totalPages))}\r\n+                            disabled={currentPage === totalPages}\r\n+                            className=\"px-3 py-1 text-sm bg-gray-200 rounded disabled:opacity-50\"\r\n+                        >\r\n+                            Suivant\r\n+                        </button>\r\n+                    </div>\r\n+                </CardBody>\r\n+            </Card>\r\n+        </div>\r\n+    );\r\n }\r\n \r\n-export default Accidents\n+export default Accidents;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748385481336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,9 @@\n                 <CardBody className=\"overflow-x-scroll px-0 pt-0 pb-2\">\r\n                     <table className=\"w-full min-w-[640px] table-auto border border-gray-200\">\r\n                         <thead>\r\n                             <tr className=\"bg-gray-100\">\r\n-                                {[\"ID Accident\", \"Total Véhicules\", \"Véhicules Soumis\", \"Statut\", \"Date de Création\", \"Date de Mise à Jour\", \"Actions\"].map((header) => (\r\n+                                {[\"ID Accident\", \"Total Véhicules\", \"Véhicules Soumis\", \"Statut\", \"Date de Création\", \"Actions\"].map((header) => (\r\n                                     <th key={header} className=\"px-4 py-2 text-xs font-bold text-center uppercase text-blue-gray-500 border-b\">\r\n                                         {header}\r\n                                     </th>\r\n                                 ))}\r\n@@ -71,9 +71,9 @@\n                                     <td className=\"px-4 py-2 border-b\">{accident.totalVehicles}</td>\r\n                                     <td className=\"px-4 py-2 border-b\">{accident.submittedVehicles}</td>\r\n                                     <td className=\"px-4 py-2 border-b\">{accident.isComplete ? \"Complet\" : \"Incomplet\"}</td>\r\n                                     <td className=\"px-4 py-2 border-b\">{new Date(accident.createdAt).toLocaleDateString()}</td>\r\n-                                    <td className=\"px-4 py-2 border-b\">{new Date(accident.updatedAt).toLocaleDateString()}</td>\r\n+                                   \r\n                                     <td className=\"px-4 py-2 border-b\">\r\n                                         <button\r\n                                             className=\"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium px-3 py-1.5 rounded-lg shadow-sm transition\"\r\n                                         >\r\n"
                },
                {
                    "date": 1748385617645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,11 +69,12 @@\n                                 <tr key={index} className=\"text-center text-sm\">\r\n                                     <td className=\"px-4 py-2 border-b\">{accident.accidentId}</td>\r\n                                     <td className=\"px-4 py-2 border-b\">{accident.totalVehicles}</td>\r\n                                     <td className=\"px-4 py-2 border-b\">{accident.submittedVehicles}</td>\r\n-                                    <td className=\"px-4 py-2 border-b\">{accident.isComplete ? \"Complet\" : \"Incomplet\"}</td>\r\n+                                    <td className={`px-4 py-2 border-b ${accident.isComplete ? \"text-green-600\" : \"text-red-600\"}`}>\r\n+                                        {accident.isComplete ? \"Complet\" : \"Incomplet\"}\r\n+                                    </td>\r\n                                     <td className=\"px-4 py-2 border-b\">{new Date(accident.createdAt).toLocaleDateString()}</td>\r\n-                                   \r\n                                     <td className=\"px-4 py-2 border-b\">\r\n                                         <button\r\n                                             className=\"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium px-3 py-1.5 rounded-lg shadow-sm transition\"\r\n                                         >\r\n"
                },
                {
                    "date": 1748385723038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n export function Accidents() {\r\n     const [accidents, setAccidents] = useState([]);\r\n     const [search, setSearch] = useState(\"\");\r\n     const [currentPage, setCurrentPage] = useState(1);\r\n-    const accidentsPerPage = 5;\r\n+    const accidentsPerPage = 1;\r\n \r\n     useEffect(() => {\r\n         const fetchAccidents = async () => {\r\n             const res = await client.get(\"/accident/accident\");\r\n"
                },
                {
                    "date": 1748385744490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n export function Accidents() {\r\n     const [accidents, setAccidents] = useState([]);\r\n     const [search, setSearch] = useState(\"\");\r\n     const [currentPage, setCurrentPage] = useState(1);\r\n-    const accidentsPerPage = 1;\r\n+    const accidentsPerPage = 5;\r\n \r\n     useEffect(() => {\r\n         const fetchAccidents = async () => {\r\n             const res = await client.get(\"/accident/accident\");\r\n"
                },
                {
                    "date": 1748386548926,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,13 +6,17 @@\n } from \"@material-tailwind/react\";\r\n import { EyeIcon } from \"@heroicons/react/24/outline\";\r\n import { useEffect, useState } from \"react\";\r\n import client from \"../../api/client\";\r\n+import AccidentDetailsModal from \"@/components/AccidentDetailsModal\";\r\n \r\n+\r\n export function Accidents() {\r\n     const [accidents, setAccidents] = useState([]);\r\n     const [search, setSearch] = useState(\"\");\r\n     const [currentPage, setCurrentPage] = useState(1);\r\n+    const [openModal, setOpenModal] = useState(false);\r\n+    const [selectedAccidentId, setSelectedAccidentId] = useState(null);\r\n     const accidentsPerPage = 5;\r\n \r\n     useEffect(() => {\r\n         const fetchAccidents = async () => {\r\n@@ -21,8 +25,18 @@\n         };\r\n         fetchAccidents();\r\n     }, []);\r\n \r\n+    const handleOpenModal = (accidentId) => {\r\n+        setSelectedAccidentId(accidentId);\r\n+        setOpenModal(true);\r\n+    };\r\n+\r\n+    const handleCloseModal = () => {\r\n+        setOpenModal(false);\r\n+        setSelectedAccidentId(null);\r\n+    };\r\n+\r\n     const filteredAccidents = accidents?.filter((acc) =>\r\n         acc.accidentId?.toLowerCase().includes(search.toLowerCase())\r\n     );\r\n \r\n@@ -75,8 +89,9 @@\n                                     </td>\r\n                                     <td className=\"px-4 py-2 border-b\">{new Date(accident.createdAt).toLocaleDateString()}</td>\r\n                                     <td className=\"px-4 py-2 border-b\">\r\n                                         <button\r\n+                                            onClick={() => handleOpenModal(accident.accidentId)}\r\n                                             className=\"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium px-3 py-1.5 rounded-lg shadow-sm transition\"\r\n                                         >\r\n                                             <EyeIcon className=\"h-5 w-5\" />\r\n                                         </button>\r\n@@ -107,8 +122,14 @@\n                         </button>\r\n                     </div>\r\n                 </CardBody>\r\n             </Card>\r\n+\r\n+            <AccidentDetailsModal\r\n+                open={openModal}\r\n+                onClose={handleCloseModal}\r\n+                accidentId={selectedAccidentId}\r\n+            />\r\n         </div>\r\n     );\r\n }\r\n \r\n"
                }
            ],
            "date": 1748384282141,
            "name": "Commit-0",
            "content": "import React from 'react'\r\n\r\nfunction Accidents() {\r\n  return (\r\n    <div>A</div>\r\n  )\r\n}\r\n\r\nexport default Accidents"
        }
    ]
}