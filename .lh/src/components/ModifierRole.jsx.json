{
    "sourceFile": "src/components/ModifierRole.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1749325684960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1749325989697,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n                 updateData.password = formData.password;\r\n             }\r\n \r\n             const response = await apiClient.post(\"/admin/modifierByRol\", updateData);\r\n-\r\n+console.log(\"response\",response)\r\n             toast.success(\"Gestionnaire modifié avec succès.\", {\r\n                 position: \"top-right\",\r\n                 autoClose: 3000,\r\n             });\r\n"
                },
                {
                    "date": 1749326080026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,16 +48,19 @@\n                 updateData.password = formData.password;\r\n             }\r\n \r\n             const response = await apiClient.post(\"/admin/modifierByRol\", updateData);\r\n-console.log(\"response\",response)\r\n-            toast.success(\"Gestionnaire modifié avec succès.\", {\r\n+            if(response.status===200){\r\n+\r\n+            toast.success(response?.data?.message, {\r\n                 position: \"top-right\",\r\n                 autoClose: 3000,\r\n             });\r\n \r\n             onGestionnaireUpdated();\r\n             handleClose();\r\n+            }\r\n+\r\n         } catch (error) {\r\n             console.error(\"Error updating gestionnaire:\", error);\r\n             toast.error(\"Erreur lors de la modification du gestionnaire.\", {\r\n                 position: \"top-right\",\r\n"
                }
            ],
            "date": 1749325684960,
            "name": "Commit-0",
            "content": "\r\nimport {\r\n    Dialog,\r\n    DialogHeader,\r\n    DialogBody,\r\n    DialogFooter,\r\n    Input,\r\n    Button,\r\n} from \"@material-tailwind/react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport apiClient from \"@/api/client\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nfunction ModifierRole({ open, handleClose, gestionnaire, onGestionnaireUpdated }) {\r\n    const [formData, setFormData] = useState({\r\n        id: \"\",\r\n        name: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n    });\r\n\r\n    // Update formData when gestionnaire prop changes\r\n    useEffect(() => {\r\n        if (gestionnaire) {\r\n            setFormData({\r\n                id: gestionnaire._id || \"\",\r\n                name: gestionnaire.name || \"\",\r\n                email: gestionnaire.email || \"\",\r\n                password: \"\",\r\n            });\r\n        }\r\n    }, [gestionnaire]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        try {\r\n            const updateData = {\r\n                id: formData.id,\r\n                name: formData.name,\r\n                email: formData.email,\r\n            };\r\n            if (formData.password) {\r\n                updateData.password = formData.password;\r\n            }\r\n\r\n            const response = await apiClient.post(\"/admin/modifierByRol\", updateData);\r\n\r\n            toast.success(\"Gestionnaire modifié avec succès.\", {\r\n                position: \"top-right\",\r\n                autoClose: 3000,\r\n            });\r\n\r\n            onGestionnaireUpdated();\r\n            handleClose();\r\n        } catch (error) {\r\n            console.error(\"Error updating gestionnaire:\", error);\r\n            toast.error(\"Erreur lors de la modification du gestionnaire.\", {\r\n                position: \"top-right\",\r\n                autoClose: 3000,\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ToastContainer position=\"top-center\" />\r\n            <Dialog open={open} handler={handleClose}>\r\n                <DialogHeader>Modifier Gestionnaire</DialogHeader>\r\n                <DialogBody>\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <Input\r\n                            label=\"Nom\"\r\n                            name=\"name\"\r\n                            value={formData.name}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                        <Input\r\n                            label=\"Email\"\r\n                            name=\"email\"\r\n                            type=\"email\"\r\n                            value={formData.email}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                        <Input\r\n                            label=\"Mot de passe (laisser vide pour ne pas modifier)\"\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            value={formData.password}\r\n                            onChange={handleChange}\r\n                        />\r\n                    </div>\r\n                </DialogBody>\r\n                <DialogFooter>\r\n                    <Button\r\n                        variant=\"text\"\r\n                        color=\"blue-gray\"\r\n                        onClick={handleClose}\r\n                        className=\"mr-1\"\r\n                    >\r\n                        Annuler\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"gradient\"\r\n                        color=\"blue\"\r\n                        onClick={handleSubmit}\r\n                    >\r\n                        Enregistrer\r\n                    </Button>\r\n                </DialogFooter>\r\n            </Dialog>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ModifierRole;\r\n"
        }
    ]
}